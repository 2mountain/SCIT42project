<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org"
 xmlns:sec="http://thymeleaf.org/extras/spring-security">

<head>
<meta charset="UTF-8">
<meta name="description" content="">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<!-- Title -->
<title>Board</title>

<!-- Favicon -->
<link rel="icon" th:href="@{/img/core-img/favicon.ico}">

<!-- Core Stylesheet -->
<link rel="stylesheet" th:href="@{/css/style.css}">

<!-- Responsive CSS -->
<link th:href="@{/css/responsive/responsive.css}" rel="stylesheet">

<!-- BootStrap4 added by San-->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
<script
	src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>



<!-- test -->
<link rel="stylesheet" type="text/css" th:href="@{/css/board/board.css}" />

<!-- test -->
<script>

	// 글 삭제
	function deleteBoard(num) {
		if (confirm('삭제하시겠습니까?')) {
			location.href = 'delete?boardNumber=' + num;
		}
	}
	
	// 댓글 작성
	function validation() {
		let replytext = document.getElementById('replyContents');
		if (replytext.value.length < 3) {
			alert('댓글 3자 이상으로 작성해주세요.');
			return false;
		}
		return true;
	}
	
	// 댓글 수정
	function replyUpdate(replyNumber, boardNumber) {
		alert(replyNumber);
		$('#re' + replyNumber).html('');
	}
	
	// 댓글 삭제
	function replyDelete(replyNumber, boardNumber) {
		if (confirm('삭제하시겠습니까?')) {
			location.href = 'replyDelete?replyNumber=' + replyNumber + '&boardNumber=' + boardNumber;
		}
	}
	
</script>

<script>
	$(document).ready(function() {
		
		let contents = $("#contents").val();
		
		console.log(contents);
		
		let convertedContents = contents.replace(/(<([^>]+)>)/ig,"");
		
		console.log(convertedContents);
		
		$("#contents").val(convertedContents);
		
		$('#recommendbtn').click(function() {
			
			let likeCount = $("#liked").text();
			let boardNumber = $(this).attr('boardNumber');
			
			$.ajax({
				url : 'recommend',
				method : 'get',
				data : {
					boardNumber : boardNumber
				},
				success : function(isLiked) {
					
					if(isLiked == 0){
						$("#liked").text(Number(likeCount) - 1);
						$("#recommendbtn").attr("src", "../img/board-img/heartEmpty.png");
					} else {
						$("#liked").text(Number(likeCount)+ 1);		
						$("#recommendbtn").attr("src", "../img/board-img/heartFull.png");
					}
					
				},
				error : function(request, status, error) {
					alert("status : " + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
				}
			});
		});
		
		

	});

</script>

</head>

<body>
	<!-- Preloader Start -->
	<div id="preloader">
		<div class="yummy-load"></div>
	</div>

		<!-- ****** Top Header Area Start ****** -->
	<div class="top_header_area">
		<div class="container">
			<div class="row">
				<div class="col-5 col-sm-6">
					
				</div>
				<!--  Login Register Area -->
				<div class="col-7 col-sm-6">
					<div class="signup-search-area d-flex align-items-center justify-content-end">

						<!-- Search Form -->
						<div class="search-hidden-form">
							<form action="#" method="get">
								<input type="search" name="search" id="search-anything"
									placeholder="Search Anything...">
								<!-- <input type="submit" value="" class="d-none"> -->
								<!-- <span class="searchBtn"><i class="fa fa-times" aria-hidden="true"></i></span> -->
							</form>
						</div>
						<!-- Search Button Area -->
						<div class="search_button">
							<a class="searchBtn" href="#"><i class="fa fa-search" aria-hidden="true"></i></a>
						</div>
						<div class="login_register_area d-flex">
							<div class="login" sec:authorize="not isAuthenticated()">
								<a href="member/logIn">로그인</a>
							</div>
							<div class="register" sec:authorize="not isAuthenticated()">
								<a href="member/signIn">회원가입</a>
							</div>
						</div>
						<div class="login_register_area d-flex">
						<div class="mypage" sec:authorize="isAuthenticated()" style="margin-left:20px">
							<a href="#">마이페이지</a>
						</div>
						<div class="logout" sec:authorize="isAuthenticated()" style="margin-left:10px;">
							<a th:href="@{logout}">로그아웃</a>
						</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ****** Top Header Area End ****** -->

	<!-- ****** Header Area Start ****** -->
	<header class="header_area">
		<div class="container">
			<div class="row">
				<!-- Logo Area Start -->
				<div class="col-12">
						<a th:href="@{/}" class="yummy-logo"><img src="img/bg-img/toplogo.jpg" alt=""></a>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-12">
					<nav class="navbar navbar-expand-lg">
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#yummyfood-nav"
							aria-controls="yummyfood-nav" aria-expanded="false" aria-label="Toggle navigation">
							<i class="fa fa-bars" aria-hidden="true"></i> Menu
						</button>
						<!-- Menu Area Start -->
						<div class="collapse navbar-collapse justify-content-center" id="yummyfood-nav">
							<ul class="navbar-nav" id="yummy-nav">
								<li class="nav-item active"><a class="nav-link" th:href="@{/board/boardImage}">커뮤니티 <span
											class="sr-only">(current)</span></a>
								</li>
								<li class="nav-item"><a class="nav-link"
								th:href="@{/qna/list}">QnA <span class="sr-only">(current)</span></a>
								</li>
								<li class="nav-item"><a class="nav-link" th:href="@{/facilities}">시설</a></li>
								<li class="nav-item"><a class="nav-link" href="#">상품</a></li>
								<li class="nav-item"><a class="nav-link" href="#">챌린지</a></li>
								<li class="nav-item"><a class="nav-link" href="#">포인트상점</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
	</header>
	<!-- ****** Header Area End ****** -->

	<!-- ****** Breadcumb Area Start ****** -->
	<div class="breadcumb-area"
		style="background-image: url(../img/bg-img/breadcumb.jpg);">
		<div class="container h-100">
			<div class="row h-100 align-items-center">
				<div class="col-12">
					<div class="bradcumb-title text-center">
						<h2>Aimori Community~~!!</h2>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="breadcumb-nav">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a th:href="@{/}"><i
									class="fa fa-home" aria-hidden="true"></i>Home</a></li>
							<li class="breadcrumb-item active" aria-current="page">Aimori
								Community</li>
						</ol>
						<div class="pull-right">
							<a th:href="@{/board/list}">글목록</a>
						</div>
						<br>
						<hr>
						<ol>
							<li><h5 th:text="${board.boardTitle}"
									style="text-align: center;"></h5></li>
						</ol>
						<hr>
					</nav>
				</div>
			</div>
		</div>
	</div>
	<!-- ****** Breadcumb Area End ****** -->

	<!-- ****** Archive Area Start ****** -->

	<section>

		<div class="container">

			<table class="table">
				<tr>
					<th class="readCenter">작성자</th>
					<td th:text="${board.memberId}" style="width: 600px;"></td>
				</tr>
				<tr>
					<th class="readCenter">작성일</th>
					<td th:text="${board.boardInputDate}"></td>
				</tr>
				<tr>
					<th class="readCenter">조회수</th>
					<td th:text="${board.boardHits}"></td>
				</tr>
				<tr>
					<th class="readCenter">제목</th>
					<td th:text="${board.boardTitle}"></td>
				</tr>
				<tr>
					<th class="readCenter" id="boardReadContents">내용</th>
					<!-- <td><textarea name="boardContents"
							style="width: 900px; height: 600px;" id="contents"
							th:text="${board.boardContents}" readonly>
							</textarea>
					</td> -->
					<td><pre 
							style="width: 900px; height: 200px;" id="contents"
							th:utext="${board.boardContents}">
							</pre>
							<img th:src="@{/img/fileSave/} + ${board.boardImageSaved}">
					</td>
				</tr>
				<tr>
					<th style="text-align: center;">파일첨부</th>
					<td><a
						th:href="@{/board/download(boardNumber=${board.boardNumber})}"
						th:text="${board.boardImageOriginal}"></a>
						<!-- temp -->
						<img th:src="@{/img/fileSave/} + ${board.boardImageSaved}" width="100">
					</td>
				</tr>
				<tr>
					<th sec:authorize="isAuthenticated()" colspan="2" style="background-color: white;">
						<div class="pull-right">
							<a th:if="${ifLiked.boardLikedNumber == 0}">
							<img th:src="@{/img/board-img/heartEmpty.png}" width="50"
								type="button" id="recommendbtn"
								th:boardNumber="${board.boardNumber}">
							</a>
							<a th:if="${ifLiked.boardLikedNumber != 0}">
							<img th:src="@{/img/board-img/heartFull.png}" width="50"
								type="button" id="recommendbtn"
								th:boardNumber="${board.boardNumber}">
							</a>
							<span id="liked" style="font-size: 25px;"
								th:text="${boardLikedData}"></span>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<a>
								<img th:src="@{/img/board-img/report.png}" width="50">
							</a>
						</div>
					</th>
				</tr>
			</table>
			<div  th:if="${#authentication.name} == ${board.memberId}"
					class="pull-right">
				<a class="btn btn-primary"
					style="background-color: rgb(220, 220, 255);"
					th:href="@{/board/update(boardNumber=${board.boardNumber})}">수정</a>
				<a class="btn btn-primary"
					style="background-color: rgb(220, 220, 255);"
					th:href="|javascript:deleteBoard(${board.boardNumber})|">삭제</a>
			</div>
			<br>

			<!-- <div th:if="${#authentication.name} == ${board.memberId}"> -->

		</div>
		
		<!-- 리플 작성 폼 -->
		<div style="height: 30px;">
		</div>

		<div class="container">
		<hr sec:authorize="isAuthenticated()">
			<div sec:authorize="isAuthenticated()" class="card-body" style="padding-left: 200px;">
				<form class="form-horizontal" th:action="@{/board/replyInsert}" method="post" onsubmit="return validation();">
				<input type="hidden" name="boardNumber" th:value="${board.boardNumber}">
					<div class="row">
						<div class="form-group col-sm-10">
							<textarea class="form-control input-sm" type="text" id="replyContents" name="replyContents" placeholder="댓글 입력..." style="height : 100px; border: solid 1px gray;"></textarea>
						</div>
						<div style="padding-top: 10px">
							<input class="btn btn-primary btn-sm" type="submit" value="등록">
						</div>
					</div>
				</form>
			</div>
		<hr>
		
		
		
		<!-- 리플 목록 출력 시작 -->
		<div class="pull-left" style="padding-left: 200px; font-size: 20px; height: 60px;">
		<a th:text="'댓글' + '[' + ${board.replyCount} + ']'" ></a>
		</div>
		<div class="container" style="padding-left: 210px;">
			<table class="reply">
			
				<tr th:each="reply : ${replylist}">
					<td class="memberId" th:text="${reply.memberId}"></td>
					<td class="replyContents" th:text="${reply.replyContents}" th:id="'re'+${reply.replyNumber}"></td>
					<td class="replyInputDate" th:text="${reply.replyInputDate}" style="width: 200px;"></td>
					<td>
						<a class="btn btn-secondary btn-sm" style="color: white;"
						th:href="|javascript:replyUpdate(${reply.replyNumber}, ${reply.boardNumber})|">
						수정
						</a>
						<span th:if="${#authentication.name} == ${reply.memberId}">
						<a  class="btn btn-secondary btn-sm" style="color: white;"
						th:href="|javascript:replyDelete(${reply.replyNumber}, ${reply.boardNumber})|">
						삭제
						</a>
						</span>
					</td>
				</tr>

			</table>
		</div>
		
		
		
		</div>
                        
	</section>



	<!-- ****** Instagram Area Start ****** -->
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<br>
	<div
		class="instargram_area owl-carousel section_padding_100_0 clearfix"
		id="portfolio">

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/1.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/2.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/3.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/4.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/5.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/6.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/1.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Instagram Item -->
		<div class="instagram_gallery_item">
			<!-- Instagram Thumb -->
			<img th:src="@{/img/instagram-img/2.jpg}" alt="">
			<!-- Hover -->
			<div class="hover_overlay">
				<div class="yummy-table">
					<div class="yummy-table-cell">
						<div class="follow-me text-center">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i>
								Follow me</a>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<!-- ****** Our Creative Portfolio Area End ****** -->

	<!-- ****** Footer Social Icon Area Start ****** -->
	<div class="social_icon_area clearfix">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="footer-social-area d-flex">
						<div class="single-icon">
							<a href="#"><i class="fa fa-facebook" aria-hidden="true"></i><span>facebook</span></a>
						</div>
						<div class="single-icon">
							<a href="#"><i class="fa fa-twitter" aria-hidden="true"></i><span>Twitter</span></a>
						</div>
						<div class="single-icon">
							<a href="#"><i class="fa fa-google-plus" aria-hidden="true"></i><span>GOOGLE+</span></a>
						</div>
						<div class="single-icon">
							<a href="#"><i class="fa fa-linkedin-square"
								aria-hidden="true"></i><span>linkedin</span></a>
						</div>
						<div class="single-icon">
							<a href="#"><i class="fa fa-instagram" aria-hidden="true"></i><span>Instagram</span></a>
						</div>
						<div class="single-icon">
							<a href="#"><i class="fa fa-vimeo" aria-hidden="true"></i><span>VIMEO</span></a>
						</div>
						<div class="single-icon">
							<a href="#"><i class="fa fa-youtube-play" aria-hidden="true"></i><span>YOUTUBE</span></a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ****** Footer Social Icon Area End ****** -->

	<!-- ****** Footer Menu Area Start ****** -->
	<footer class="footer_area">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="footer-content">
						<div class="footer-content">
							<!-- Logo Area Start -->
							<div class="footer-logo-area text-center">
								<a th:href="@{/}" class="yummy-logo"><img src="img/bg-img/toplogo.jpg" alt=""></a>
							</div>
							<!-- Menu Area Start -->
							<nav class="navbar navbar-expand-lg">
								<button class="navbar-toggler" type="button"
									data-toggle="collapse" data-target="#yummyfood-footer-nav"
									aria-controls="yummyfood-footer-nav" aria-expanded="false"
									aria-label="Toggle navigation">
									<i class="fa fa-bars" aria-hidden="true"></i> Menu
								</button>
								<!-- Menu Area Start -->
								<div class="collapse navbar-collapse justify-content-center"
									id="yummyfood-footer-nav">
									<ul class="navbar-nav">
										<li class="nav-item active"><a class="nav-link"
											th:href="@{/board/list}">커뮤니티 <span class="sr-only">(current)</span></a>
										</li>
										<li class="nav-item"><a class="nav-link"
											th:href="@{/facilities}">시설</a></li>
										<li class="nav-item"><a class="nav-link" href="#">상품</a></li>
										<li class="nav-item"><a class="nav-link" href="#">챌린지</a></li>
										<li class="nav-item"><a class="nav-link" href="#">포인트상점</a>
										</li>
									</ul>
								</div>
							</nav>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="row">
				<div class="col-12">
					<!-- Copywrite Text -->
					<div class="copy_right_text text-center">
						<p>
							Copyright @2018 All rights reserved | This template is made with
							<i class="fa fa-heart-o" aria-hidden="true"></i> by <a
								href="https://colorlib.com" target="_blank">Colorlib</a>
						</p>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- ****** Footer Menu Area End ****** -->

	<!-- Jquery-2.2.4 js -->
	<script th:src="@{/js/jquery/jquery-2.2.4.min.js}"></script>
	<!-- Popper js -->
	<script th:src="@{/js/bootstrap/popper.min.js}"></script>
	<!-- All Plugins JS -->
	<script th:src="@{/js/others/plugins.js}"></script>
	<!-- Active JS -->
	<script th:src="@{/js/active.js}"></script>
	<!--  type="application/js" -->

	<!-- 게시판 디자인 ck editor -->

</body>